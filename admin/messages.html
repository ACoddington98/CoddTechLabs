<h2>Inbox</h2>
<div id="messages"></div>

<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js';

  const supabase = createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
  );

  async function loadMessages() {
    const { data, error } = await supabase
      .from('messages')
      .select('*')
      .order('created_at', { ascending: false });

    const container = document.getElementById('messages');
    container.innerHTML = '';

    data.forEach(msg => {
      container.innerHTML += `
        <div>
          <h3>${msg.name} (${msg.email})</h3>
          <p>${msg.message}</p>
          <small>${msg.created_at}</small>
        </div>
        <hr>
      `;
    });
  }

  loadMessages();
</script>
